internal_interface: "eth0"
int_net_addr: "10.1.0.0"
int_ip_addr: "10.1.100.144"
int_net_mask: "255.255.0.0"
int_gateway: "10.1.10.4"
infiniband_available: False
# We have different size of root disks, so we need different partitioning (2X300G RAID1)

network_ether_interfaces:
  - device: "{{internal_interface}}"
    bootproto: "static"
    onboot: "yes"
    address: "{{int_ip_addr}}"
    netmask: "{{int_net_mask}}"
    nm_controlled: "no"
    type: "Ethernet"

# Kickstart file VM specifics

vcpus: "{{vm_cpus}}"
ram: "{{vm_mem}}"

disks:
  - { pool: "{{ libvirt_pool_name }}", size: 200 }

kickstart_partitions: |
  bootloader --location=mbr --append="selinux=0" --boot-drive=vda
  autopart --type=lvm
  zerombr
  clearpart --all --initlabel --drives=vda
  part /boot --size=500 --asprimary --ondrive=vda 
  part pv.01 --size=1 --grow --ondrive=vda
  volgroup vgroot --pesize=4096 pv.01
  logvol /  --fstype="xfs" --size=50000 --name=lv_root --vgname=vgroot
  logvol /tmp  --fstype="xfs" --size=1 --grow --name=lv_tmp --vgname=vgroot



kickstart_profile: kvm-vm-profile

# Note on Compute nodes partitioning:
#
# Each site can fine tune this to match their needs
# Only requeirement is that Root part needs at least 200GB
# Please note that if you rather not have a /local partition you can remove it.
# If so, don't forget to add "--grow" in part / line

#  bootloader --location=mbr --append="selinux=0" --boot-drive=sda
#  autopart --type=lvm
#  clearpart --all --initlabel --drives=sda
#  zerombr

kickstart_packages: |
  atlas
  blas
  bonnie++
  cvs
  epel-release
  fftw
  fftw2
  gcc
  gcc-c++
  gcc-gfortran
  git
  glibc.i686
  @infiniband
  -iwpmd
  infiniband-diags
  iperf
  java-1.8.0-openjdk
  lapack
  libcgroup
  libgcc.i686
  libgfortran
  libstdc++.i686
  libxml2.i686
  mcelog
  netcdf
  nfs-utils
  nscd
  numpy
  openssh-server
  perl-Filesys-Df
  rsync
  subversion
  xerces-c
  yum-plugin-fastestmirror
  Lmod
  wget
  bzip2

